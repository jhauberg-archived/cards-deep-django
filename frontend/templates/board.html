{% load core_helpers %}

<!DOCTYPE html>
<html>
    
    {% include 'parts/boilerplate/head.html' %}

    <body>

        {% if state %}

            <div class="board">

                {{ state.health }}<br />

                <ul class="stack" id="room">

                    {% for card in state.stacks.0.cards %}

                        <li class="card {{ card.details.kind|kind_name }}">

                            {% include 'parts/card.html' with card=card only %}

                        </li>

                    {% endfor %}

                </ul>

                <div class="stack" id="map">
                    <div class="card" id="map-bottom"></div>
                    <div class="card" id="map-top"></div>
                </div>
            </div>

        {% endif %}

        <script type="text/javascript">
            $("#room .card").mouseenter(
              function(){
                $(this).animate({
                        marginTop: '12px'
                    }, {
                        duration: 400,
                        specialEasing: {
                          width: 'linear',
                          height: 'easeOutBounce'
                        }
                    }
                );
              }
            );

            $("#room .card").mouseleave(
              function() {
                $(this).animate({
                        marginTop: '0px'
                    }, {
                        duration: 150,
                        specialEasing: {
                          width: 'linear',
                          height: 'easeOutBounce'
                        }
                    }
                );
              }
            );
        </script>

        <script type="text/javascript">
            $("#map").mouseenter(
              function(){
                $('#map-bottom').animate({
                        left: '8px'
                    }, {
                        duration: 300,
                        specialEasing: {
                          width: 'linear',
                          height: 'easeOutBounce'
                        }
                    }
                );
              }
            );

            $("#map").mouseleave(
              function() {
                $('#map-bottom').animate({
                        left: '0px'
                    }, {
                        duration: 200,
                        specialEasing: {
                          width: 'linear',
                          height: 'easeOutBounce'
                        }
                    }
                );
              }
            );
        </script>

        <script type="text/javascript">
            $("#map").click(function() {
                    $('#map').append('<div class="card monster" id="new-card"></div>');
                }
            );
        </script>

    </body>
</html>