<!DOCTYPE html>

<html>

    {% include 'parts/boilerplate/head.html' %}

    <body>

        {% if state %}

            <div class="header">
                <ul class="menu">
                    <li class="menu-item"><a href="#" id="help">How To Play</a></li>
                    <li class="menu-item"><a href="#" id="stats">Statistics</a></li>
                </ul>


            </div>

            <div class="board">
                <ul class="card stack" id="discarded">

                    {% include 'parts/stack.html' with stack=state.stacks.5 backside=1 only %}

                </ul>
                
                <div class="scoreboard">
                    <div class="scoreboard-value">{{ state.score }}</div>
                </div>

                <ul class="stack" id="room">

                    {% include 'parts/stack.html' with stack=state.stacks.0 only %}

                </ul>

                <ul class="stack" id="map">
                    <li class="card" id="map-bottom"></li>
                    <li class="card" id="map-top"></li>
                </ul>

                <div id="hint-skip" style="{% if not state.can_skip_on_next_move %}visibility: hidden;{% endif %}">
                    You can skip on the next turn
                </div>

                <div id="action-stacks">
                    <div id="secondary">
                        <ul class="card stack" id="forge">
                            
                            {% include 'parts/stack.html' with stack=state.stacks.4 only %}

                        </ul>

                        <ul class="card stack" id="treasure">
                            
                            {% include 'parts/stack.html' with stack=state.stacks.3 only %}

                        </ul>
                    </div>
                    
                    <div id="primary">
                        <ul class="card stack" id="equipment">
                            
                            {% include 'parts/stack.html' with stack=state.stacks.1 only %}

                        </ul>

                        <div class="button {% if state.stacks.1.cards|length == 0 %} disabled {% endif %}" id="strike-action">
                            STRIKE<br>{% if state.stacks.1.cards|length > 0 and state.stacks.2.cards|length > 0 %}{{ state.stacks.2.cards|length }}{% endif %}{% if state.score_multiplier > 1 %} * {{ state.score_multiplier }}{% endif %}
                        </div>

                        <ul class="card stack" id="you">
                            
                            {% include 'parts/stack.html' with stack=state.stacks.2 only %}

                        </ul>
                    </div>
                </div>

                <div class="button {% if state.stacks.4.cards|length == 0 %} disabled {% endif %}" id="forge-action">
                    FORGE<br>{% if state.stacks.4.cards|length > 0 %}{{ state.stacks.4.cards|length }}{% endif %}
                </div>

                <div class="button {% if state.stacks.3.cards|length == 0 %} disabled {% endif %}" id="treasure-action">
                    BUFF<br>{% if state.stacks.3.cards|length > 0 %}{{ state.stacks.3.cards|length }}{% endif %}
                </div>

                <div class="health">
                    <div class="health-ui">
                        <div class="value">
                            {{ state.health }}
                        </div>
                    </div>
                    <div class="health-bar-frame">
                        <div class="health-bar"></div>
                    </div>
                </div>
            </div>

            <script type="text/javascript">
            
                {% include 'game.js' with state=state %}

            </script>

        {% endif %}

    </body>
</html>